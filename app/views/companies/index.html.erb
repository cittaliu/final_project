<%= render partial: '/partials/header' %>
<%= render partial: '/partials/side' %>

<div id="content" class="app-content" role="main">
  <div class="app-content-body">

<div class="text-danger">
  <%=flash[:error] %>
</div>

<div class="bg-light lter b-b wrapper-md">
  <h1 class="m-n font-thin h3"><i class="icon-magnifier i-sm m-r-sm"></i> Search</h1>
</div>

<div class="wrapper-md">
<form class="m-b-md">
  <%= form_tag(companies_path, :method => "get", id: "search-form") do %>
  <div class="input-group">
  <%= text_field_tag :search, params[:search], class: "search-query form-control input-lg", placeholder: "Find a company", type: "search", data: {autocomplete: companies_autocomplete_company_name_path} %>
  <span class="input-group-btn">
  <%= submit_tag "Search", class: "btn btn-lg btn-default" %>
  </span>
  </div>
  <%end%>
</form>

  <div class="tab-container">
    <ul class="nav nav-tabs">
    <li class="active"><a href data-toggle="tab" data-target="#tab_1">Top Picks for You <span class="badge badge-sm m-l-xs">10</span></a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="tab_1">
        <ul class="list-group no-borders pull-in m-b-none">
          <% @companies.first(10).each do |company| %>
          <li class="list-group-item">
            <%=link_to company.name, company_path(company), class: "h4 text-primary m-b-sm m-t-sm block" %>
            <p><%= company.description %></p>
            <p><span class="label bg-primary pos-rlt m-r inline wrapper-xs"><i class="arrow right arrow-primary"></i> Tags:</span> <a href class="m-r-sm">admin</a> <a href>app</a>
            </p>
          </li>
          <% end %>
        </ul>
      </div>
    </div>
  </tabset>
</div>
</div>

<!-- <script type="text/javascript" charset="utf-8">
  $( "#search" ).autocomplete({
      source: <% @companies %>
    });
  } );
</script> -->

<!--
<div class="companies-search">
  <input type="text" id="companies-search-txt" autofocus>
  <div class="results" id="companies-search-results">
  </div>
</div> -->

<!-- <script>
  $(function() {
    new app.Companies;
  });
</script> -->

<!-- <%= content_for :script do %>
  new app.Companies;
<% end %> -->

<div class="container text-center">
    <div class="row">
      <div class="col-md-6 col-md-offset-2">
          <h3>Did not find the company you are looking for? Add company below</h3>
        </br>
        <div class="col-md-12 text-danger">
          <%=flash[:error] %>
        </div>
          <%= form_for @companies.new, url: new_company_path do |f| %>
          <div class = "form-group">
          <%= f.text_field :name, class: "form-control", placeholder: "Company Name"%>
          </div>
          <div class = "form-group">
          <%= f.text_field :website, class: "form-control", placeholder: "Company Website" %>
          </div>
          <div class = "form-group">
            <hr>
            <%= submit_tag "Submit", class: "btn btn-info"%>
          </div>
          <% end %>
      </div>
    </div>
    <br>
    <br>
  </div>


</div>
</div>
